<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†Ø´Ø¦ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</title>
    <style>
        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, sans-serif; }
        body { background: #f5f7fa; color: #333; line-height: 1.6; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 25px rgba(0,0,0,0.08); }
        h1 { color: #2c3e50; text-align: center; margin-bottom: 10px; }
        .subtitle { text-align: center; color: #7f8c8d; margin-bottom: 30px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #2c3e50; }
        input, textarea, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; }
        textarea { min-height: 100px; }
        .btn { 
            background: #3498db; 
            color: white; 
            border: none; 
            padding: 14px 25px; 
            font-size: 18px; 
            border-radius: 8px; 
            cursor: pointer; 
            width: 100%; 
            transition: all 0.3s; 
            font-weight: bold;
        }
        .btn:hover { background: #2980b9; transform: translateY(-2px); }
        .btn.secondary { background: #2ecc71; }
        .logo-preview { display: flex; gap: 15px; margin: 15px 0; }
        .logo-container { 
            width: 100px; height: 100px; 
            border: 2px dashed #3498db; 
            border-radius: 10px; 
            display: flex;
            align-items: center;
            justify-content: center;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
        }
        .gallery-preview { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); 
            gap: 10px; 
            margin: 15px 0; 
        }
        .gallery-item { 
            width: 100%; 
            height: 100px; 
            background-size: cover; 
            background-position: center; 
            border-radius: 8px; 
            border: 1px solid #eee;
        }
        .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .action-buttons { display: flex; gap: 15px; margin: 20px 0; }
        .loading { display: none; text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px; margin: 20px 0; }
        @media (max-width: 600px) {
            .two-col, .action-buttons { grid-template-columns: 1fr; flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ  Ù…Ù†Ø´Ø¦ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</h1>
        <p class="subtitle">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù‚Ø§Ø± Ù„Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± PDF</p>
        
        <div class="action-buttons">
            <button class="btn secondary" onclick="generateSamplePDF()">ØªÙ‚Ø±ÙŠØ± Ù†Ù…ÙˆØ°Ø¬ÙŠ</button>
            <button class="btn" onclick="showJSONForm()">Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ÙŠØ¯ÙˆÙŠ</button>
        </div>
        
        <div class="loading" id="loading">
            â³ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±ØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...
        </div>
        
        <form id="propertyForm" style="display: none;">
            <div class="form-group">
                <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ù‚Ø§Ø±:</label>
                <input type="text" name="title" required placeholder="ÙÙŠÙ„Ø§ ÙØ§Ø®Ø±Ø© Ø¨Ø£Ø¨Ø­Ø± Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©">
            </div>
            
            <div class="two-col">
                <div class="form-group">
                    <label>Ø§Ù„Ø³Ø¹Ø± (Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ):</label>
                    <input type="number" name="price" required placeholder="174147140">
                </div>
                <div class="form-group">
                    <label>Ø§Ù„Ù…Ø³Ø§Ø­Ø© (Ù…Â²):</label>
                    <input type="number" name="area" required placeholder="625.5">
                </div>
            </div>
            
            <div class="two-col">
                <div class="form-group">
                    <label>Ø¹Ø¯Ø¯ Ø§Ù„ØºØ±Ù:</label>
                    <input type="number" name="bedrooms" placeholder="5">
                </div>
                <div class="form-group">
                    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ù…Ø§Ù…Ø§Øª:</label>
                    <input type="number" name="bathrooms" placeholder="6">
                </div>
            </div>
            
            <div class="two-col">
                <div class="form-group">
                    <label>Ù…ÙˆØ§Ù‚Ù Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª:</label>
                    <input type="number" name="parking" placeholder="3">
                </div>
                <div class="form-group">
                    <label>Ø³Ù†Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡:</label>
                    <input type="number" name="yearBuilt" placeholder="2023">
                </div>
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</label>
                <input type="text" name="location" placeholder="Ø£Ø¨Ø­Ø± Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©">
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</label>
                <input type="text" name="city" placeholder="Ø¬Ø¯Ø©">
            </div>
            
            <div class="form-group">
                <label>Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„:</label>
                <input type="text" name="contactInfo" placeholder="+966 50 123 4567">
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª (Ø§ÙØµÙ„ Ø¨ÙŠÙ†Ù‡Ø§ Ø¨ÙÙˆØ§ØµÙ„):</label>
                <input type="text" name="features" placeholder="ØªÙƒÙŠÙŠÙ Ù…Ø±ÙƒØ²ÙŠ, Ø­Ø¯ÙŠÙ‚Ø©, Ù…Ø³Ø¨Ø­, Ù…Ø±Ø¢Ø¨">
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„ÙˆØµÙ:</label>
                <textarea name="description" required placeholder="ÙˆØµÙ ØªÙØµÙŠÙ„ÙŠ Ù„Ù„Ø¹Ù‚Ø§Ø±..."></textarea>
            </div>
            
            <div class="form-group">
                <label>Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©:</label>
                <div class="logo-preview">
                    <div class="logo-container" id="logo1Preview">Ø´Ø¹Ø§Ø± 1</div>
                    <div class="logo-container" id="logo2Preview">Ø´Ø¹Ø§Ø± 2</div>
                </div>
                <div class="two-col">
                    <input type="file" name="logo1" accept="image/*" onchange="previewLogo(event, 1)">
                    <input type="file" name="logo2" accept="image/*" onchange="previewLogo(event, 2)">
                </div>
            </div>
            
            <div class="form-group">
                <label>ØµÙˆØ± Ø§Ù„Ø¹Ù‚Ø§Ø±:</label>
                <div class="gallery-preview" id="galleryPreview"></div>
                <input type="file" name="images" multiple accept="image/*" onchange="previewGallery(event)">
            </div>
            
            <button type="submit" class="btn">Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± PDF</button>
        </form>
        
        <div id="jsonForm" style="display: none;">
            <div class="form-group">
                <label>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù‚Ø§Ø± (JSON):</label>
                <textarea id="jsonData" style="height: 300px; font-family: monospace;"></textarea>
            </div>
            <button class="btn" onclick="generateFromJSON()">Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù† JSON</button>
        </div>
    </div>

    <script>
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
        }
        
        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }
        
        function showJSONForm() {
            document.getElementById('propertyForm').style.display = 'none';
            document.getElementById('jsonForm').style.display = 'block';
            document.getElementById('jsonData').value = JSON.stringify({
  "title": "ÙÙŠÙ„Ø§ ÙØ§Ø®Ø±Ø© Ø¨Ø£Ø¨Ø­Ø± Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©",
  "description": "Ø§Ù„ÙØ±ØµØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù…Ù† Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠØ©\n\nÙ„Ù„Ø¨ÙŠØ¹ | ÙÙŠÙ„Ø§ ÙØ§Ø®Ø±Ø© Ø¨Ø£Ø¨Ø­Ø± Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©\n\tâ€¢\tØªØµÙ…ÙŠÙ… Ø¥ÙŠØ·Ø§Ù„ÙŠ ÙˆØªØ´Ø·ÙŠØ¨Ø§Øª Ø±Ø§Ù‚ÙŠØ©\n\tâ€¢\tÙ…Ø¤Ø«Ø«Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„\n\tâ€¢\tØ§Ù„Ù…Ø³Ø§Ø­Ø©: 625.5 Ù…Â²\n\tâ€¢\tØªÙ‚Ø¹ Ø¹Ù„Ù‰ Ø´Ø§Ø±Ø¹ÙŠÙ†\n\nğŸ“Œ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ù…Ø±ÙÙ‚Ø© Ø£Ø¯Ù†Ø§Ù‡",
  "price": 174147140,
  "currency": "SAR",
  "type": "VILLA",
  "status": "AVAILABLE",
  "bedrooms": 5,
  "bathrooms": 6,
  "area": 625.5,
  "location": "Ø£Ø¨Ø­Ø± Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©",
  "city": "Ø¬Ø¯Ø©",
  "country": "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©",
  "images": [
    "https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
    "https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80"
  ],
  "features": [
    "ØªÙƒÙŠÙŠÙ Ù…Ø±ÙƒØ²ÙŠ",
    "Ø­Ø¯ÙŠÙ‚Ø©",
    "Ù…Ø³Ø¨Ø­",
    "Ù…Ø±Ø¢Ø¨"
  ],
  "yearBuilt": 2023,
  "parking": 3,
  "contactInfo": "+966 50 123 4567",
  "companyLogos": []
}, null, 2);
        }
        
        function generateSamplePDF() {
            showLoading();
            fetch('/generate-sample-pdf')
                .then(response => {
                    if (!response.ok) throw new Error('Network error');
                    return response.blob();
                })
                .then(blob => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'sample-property-report.pdf';
                    a.click();
                    URL.revokeObjectURL(url);
                    hideLoading();
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±');
                    hideLoading();
                });
        }
        
        function generateFromJSON() {
            showLoading();
            try {
                const jsonData = JSON.parse(document.getElementById('jsonData').value);
                fetch('/generate-pdf', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(jsonData)
                })
                .then(response => {
                    if (!response.ok) throw new Error('Network error');
                    return response.blob();
                })
                .then(blob => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'property-report.pdf';
                    a.click();
                    URL.revokeObjectURL(url);
                    hideLoading();
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£: ' + error.message);
                    hideLoading();
                });
            } catch (error) {
                alert('JSON ØºÙŠØ± ØµØ§Ù„Ø­: ' + error.message);
                hideLoading();
            }
        }

        document.getElementById('propertyForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            showLoading();
            
            const formData = new FormData(e.target);
            fetch('/generate-pdf-form', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (!response.ok) throw new Error('Network error');
                return response.blob();
            })
            .then(blob => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'property-report.pdf';
                a.click();
                URL.revokeObjectURL(url);
                hideLoading();
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±');
                hideLoading();
            });
        });

        function previewLogo(event, num) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById(`logo${num}Preview`).style.backgroundImage = `url(${e.target.result})`;
                    document.getElementById(`logo${num}Preview`).innerHTML = '';
                };
                reader.readAsDataURL(file);
            }
        }

        function previewGallery(event) {
            const galleryPreview = document.getElementById('galleryPreview');
            galleryPreview.innerHTML = '';
            
            Array.from(event.target.files).forEach(file => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const div = document.createElement('div');
                    div.className = 'gallery-item';
                    div.style.backgroundImage = `url(${e.target.result})`;
                    galleryPreview.appendChild(div);
                };
                reader.readAsDataURL(file);
            });
        }
        
        // Show property form by default
        document.getElementById('propertyForm').style.display = 'block';
    </script>
</body>
</html>